```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘                  ğŸ“‹ TABLAS PARA SUPABASE - LISTA COMPLETA               â•‘
â•‘                                                                           â•‘
â•‘                          âœ… TODO LISTO PARA COPIAR                       â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ”´ PASO 1: COPIAR EL SQL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ğŸ“ Abre el archivo: SQL_COMPLETO_SUPABASE.sql
  ğŸ“‹ Copia TODO el contenido (Ctrl+A â†’ Ctrl+C)


ğŸŸ  PASO 2: PEGAR EN SUPABASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  1. Ve a: https://supabase.com â†’ Dashboard â†’ Tu proyecto
  2. MenÃº izquierdo â†’ SQL Editor
  3. New Query
  4. Pega el SQL (Ctrl+V)
  5. Haz click RUN (o Ctrl+Enter)


ğŸŸ¡ PASO 3: VERIFICAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  DeberÃ­as ver: "Query executed successfully"
  
  Significa: âœ… Las 10 tablas se crearon correctamente


ğŸ“‹ LAS 10 TABLAS QUE SE CREAN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  1. âœ… users              - Usuarios del sistema
  2. âœ… profiles           - Perfil de usuario
  3. âœ… habits             - HÃ¡bitos y preferencias (14 campos)
  4. âœ… properties         - Departamentos/habitaciones
  5. âœ… property_images    - ImÃ¡genes de propiedades (mÃºltiples)
  6. âœ… swipes             - Registro de likes/dislikes
  7. âœ… matches            - Matches entre usuarios (con IA score)
  8. âœ… chats              - Conversaciones
  9. âœ… messages           - Mensajes en chats (tiempo real)
  10. âœ… subscriptions     - Suscripciones (free/premium)


ğŸ”— RELACIONES ENTRE TABLAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  users (1)
    â”œâ”€â†’ (1) profiles           [1 usuario = 1 perfil]
    â”œâ”€â†’ (1) habits             [1 usuario = 1 conjunto de hÃ¡bitos]
    â”œâ”€â†’ (âˆ) properties         [1 usuario = âˆ propiedades]
    â”œâ”€â†’ (âˆ) swipes             [1 usuario = âˆ swipes]
    â”œâ”€â†’ (âˆ) matches            [1 usuario = âˆ matches]
    â””â”€â†’ (âˆ) subscriptions      [1 usuario = âˆ suscripciones]

  properties (1)
    â”œâ”€â†’ (âˆ) property_images    [1 propiedad = âˆ imÃ¡genes]
    â””â”€â†’ (1) users [owner]      [1 propiedad = 1 dueÃ±o]

  matches (1)
    â””â”€â†’ (1) chats              [1 match = 1 chat]

  chats (1)
    â””â”€â†’ (âˆ) messages           [1 chat = âˆ mensajes]


ğŸ“Š DETALLES DE CADA TABLA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ USERS
   Campos: id (UUID), email (unique), role (student/non_student/admin),
           subscription_type, created_at, updated_at
   Ãndice: email (para bÃºsqueda rÃ¡pida)

2ï¸âƒ£ PROFILES
   Campos: id, user_id (foreign key), full_name, birth_date, gender,
           bio, profile_image_url, verified, created_at, updated_at
   RelaciÃ³n: 1:1 con users

3ï¸âƒ£ HABITS (14 atributos)
   Campos: id, user_id, sleep_start, sleep_end, cleanliness_level,
           noise_tolerance, party_frequency, guests_tolerance, pets,
           pet_tolerance, alcohol_frequency, work_mode, time_at_home,
           communication_style, conflict_management, responsibility_level
   Rango: MayorÃ­a 1-10 para algoritmo IA

4ï¸âƒ£ PROPERTIES
   Campos: id, owner_id (foreign key), title, description, price,
           latitude, longitude, address, available_from, is_active
   Ãndices: owner_id, is_active, available_from
   Estado: is_active para filtrar propiedades activas

5ï¸âƒ£ PROPERTY_IMAGES
   Campos: id, property_id (foreign key), image_url, validated
   RelaciÃ³n: âˆ:1 con properties (mÃºltiples imÃ¡genes por propiedad)

6ï¸âƒ£ SWIPES
   Campos: id, swiper_id (foreign key), target_user_id (foreign key),
           direction (like/dislike), created_at
   Uso: Registrar cada swipe del usuario

7ï¸âƒ£ MATCHES
   Campos: id, user_a_id, user_b_id, compatibility_score (0-100),
           matched_at, created_at
   Constraint: user_a_id != user_b_id, UNIQUE(user_a_id, user_b_id)
   Score: Calculado por algoritmo IA (>70% para crear match)

8ï¸âƒ£ CHATS
   Campos: id, match_id (unique foreign key), created_at, updated_at
   RelaciÃ³n: 1:1 con matches (1 chat por match)

9ï¸âƒ£ MESSAGES
   Campos: id, chat_id (foreign key), sender_id (foreign key), content, created_at
   Ãndice: chat_id (para obtener mensajes rÃ¡pido)
   Tiempo Real: Realtime via WebSocket

ğŸ”Ÿ SUBSCRIPTIONS
   Campos: id, user_id (foreign key), price, is_student, start_date,
           end_date, status (active/expired/cancelled), created_at, updated_at
   Tipos: free, premium, student_discount


ğŸ”’ SEGURIDAD RLS (Row Level Security)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… AutenticaciÃ³n requerida para:
   - Ver/editar perfil propio
   - Ver/editar hÃ¡bitos propios
   - Ver/editar propiedades propias
   - Ver/enviar mensajes (solo en chats propio)

âœ… PÃºblica (sin autenticaciÃ³n):
   - Propiedades activas (para buscar)
   - Perfiles (para matching)

âœ… Automatizado:
   - Solo puedes modificar tus datos
   - No puedes ver datos de otros (excepto pÃºblico)


ğŸ—„ï¸ INDICES PARA OPTIMIZACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Creados automÃ¡ticamente (20+):
- owner_id        â†’ Buscar propiedades por dueÃ±o
- is_active       â†’ Filtrar propiedades activas
- available_from  â†’ Filtrar por fecha de disponibilidad
- chat_id         â†’ Obtener mensajes del chat
- sender_id       â†’ Buscar mensajes de un usuario
- user_a_id/b_id  â†’ Buscar matches de un usuario
- status          â†’ Filtrar suscripciones activas


ğŸ’¾ ALMACENAMIENTO (Storage Buckets)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Crea 2 buckets pÃºblicos:

1. profiles/
   Uso: ImÃ¡genes de perfil de usuarios
   Carpeta: {user_id}/profile.jpg
   TamaÃ±o: Max 5MB recomendado
   Formato: JPG, PNG

2. properties/
   Uso: ImÃ¡genes de propiedades
   Carpeta: {property_id}/imagen1.jpg, imagen2.jpg, ...
   TamaÃ±o: Max 10MB por imagen recomendado
   Formato: JPG, PNG


âœ¨ CARACTERÃSTICAS IMPLEMENTADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… AutenticaciÃ³n JWT (Supabase Auth)
âœ… Perfiles de usuario con verificaciÃ³n
âœ… 14 atributos de hÃ¡bitos para matching
âœ… Sistema de propiedades con mÃºltiples imÃ¡genes
âœ… Algoritmo de compatibilidad IA (0-100%)
âœ… Swiping (like/dislike) con registro
âœ… Matching automÃ¡tico cuando es mutuo
âœ… Chat en tiempo real con WebSocket
âœ… Suscripciones (free/premium)
âœ… Row Level Security (RLS) habilitado


âš™ï¸ CONFIGURACIÃ“N NECESARIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES de ejecutar el SQL:
  âœ… Proyecto Supabase creado
  âœ… Credenciales copiadas
  âœ… RegiÃ³n configurada

DESPUÃ‰S de ejecutar el SQL:
  âœ… Crear 2 buckets de Storage
  âœ… Copiar credenciales en app_config.dart
  âœ… Ejecutar flutter pub run build_runner build
  âœ… Ejecutar flutter run


ğŸ“ PRUEBAS RECOMENDADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ver tablas creadas:
   SELECT table_name FROM information_schema.tables 
   WHERE table_schema = 'public' ORDER BY table_name;

2. Ver Ã­ndices:
   SELECT indexname FROM pg_indexes 
   WHERE schemaname = 'public' ORDER BY tablename;

3. Ver polÃ­ticas RLS:
   SELECT policyname FROM pg_policies 
   WHERE schemaname = 'public' ORDER BY tablename;

4. Probar conexiÃ³n desde Flutter:
   â†’ Ir a LoginScreen
   â†’ Intentar registrarse
   â†’ Ver en Supabase â†’ Authentication â†’ Users


ğŸš€ PRÃ“XIMOS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… Ejecutar este SQL
2. âœ… Crear Storage buckets
3. âœ… Configurar credenciales en Flutter
4. âœ… Ejecutar build_runner
5. ğŸ“ Actualizar Screens con Providers
6. ğŸ“ Desplegar microservicio IA
7. ğŸ“ Testing completo
8. ğŸ“ Deploy a PlayStore/AppStore


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        âœ… Â¡TODO ESTÃ LISTO!

La arquitectura estÃ¡ completa. Solo falta ejecutar el SQL y Â¡a programar! ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
